' Visit http://plantuml.com/de/ for more information!

' RCM-DX diagramm example and explanation at the start of specification
@startuml RCM_DX_diagram_example

  object "//DATASOURCE_NAME//" as DATASOURCE {
    a:Element (string) = "DATASOURCE"
  }
  note left
    - Group's in
      color Yellow
    
    - Attibutes with "a:"
      at the beginning

    - Datasets with "d:"
      at the beginning
  end note

  object timestamp #LightGray

  object "//CHANNEL_NAME//" as channel {
    a:Element = "CHANNEL"
    a:ChannelBasis
    a:----
  }

  object data #LightGray{
    a:Unit (string)
  }
  note left
    Data sets can also
    be individually in 
    the color gray.
  end note

  DATASOURCE "1" o-- "1" timestamp
  DATASOURCE "1" o-- "1..n" channel
  channel "1" o-- "0" data

@enduml

' RCM-DX Common Structure Overview
@startuml RCM_DX_Structure

  object RCMDX {
    a: Major (16 bit intger)
    a: Minor (16 bit intger)
  }

  object "//SESSION_NAME//" as session_name {
    a:Element (string) = "SESSION"
  }

  object "//MEASURINGSYSTEM_NAME//" as measuringsystem_name {
    a:Element (string) = "MEASURINGSYSTEM"
  }

  object CLEARANCEINFORMATION
  object DATAPROCESSING

  object PLATFORM

  object POSITION
  object SECTION
  
  object ENVIRONMENT

  object EVENT
  object RECORDS

  object TOPOLOGY

  RCMDX "1" o-- "1..n" PLATFORM
  RCMDX "1" o-- "0..1" CLEARANCEINFORMATION
  RCMDX "1" o-- "0..1" DATAPROCESSING
  
  PLATFORM "1" o-- "1" session_name
  session_name "1" o-- "1" POSITION
  session_name "1" o-- "0..1" ENVIRONMENT
  session_name "1" o-- "1..n" measuringsystem_name
  session_name "1" o-- "0..1" EVENT
  session_name "1" o-- "0..1" RECORDS
  session_name "1" o-- "1" TOPOLOGY
  session_name "1" o-- "1" SECTION
  
@enduml

' RCM-DX Measurement Structure Overview
@startuml RCM_DX_MS_overview

  object "//SESSION_NAME//" as session_name {
    a:Element (string) = "SESSION"
    a:MeasuringMode {OPERATIV | SIMULATION | TEST}
    a:StartTime (Timestamp)
    a:EndTime (Timestamp)
    a:PositionSource (string)
  }

  object "//MEASURINGSYSTEM_NAME//" as measuringsystem_name {
    a:Element (string) = "MEASURINGSYSTEM"
    a:Family (string)
    a:Revision (string)
    a:InstanceVersion (string)
    a:MeasuringMode (string)
  }

  object "//DATASOURCE_NAME//" as datasource_name {
    a:Element (string) = "DATASOURCE"
  }

  object LIMIT

  object "//LIMIT_NAME//" as limit_name {
    a:Priority (8 bit integer)
    a:LimitBound (string)
  }

  object "//CHANNEL_NAME//" as channel_name {
    a:Element (string) = "CHANNEL"
    a:TriggerMode (Enum)
    a:TriggerValue (64 bit float)
    a:ChannelBasis (Enum)
    a:ChannelType (string)
    a:ChannelType (Enum)
    a:Neighbor (string)
    a:MeasurementUncertinty (32 bit float)
    a:PositionOffset (32 bit float)
  }

  object VID {
    a:ContentType (MIME-Type, string)
    a:DataTyp (string)
    a:FramesPerSecond (16 bit signed integer)
    a:ResolutionX (32 bit signed integer)
    a:ResolutionY (32 bit signed integer)
  }

  object IMG {
    a:ContentType (MIME-Type, string)
    a:DataTyp (string)
    a:ResolutionType (string)
    a:ResolutionX (32 bit signed integer)
    a:ResolutionY (32 bit signed integer)
  }

  object data #LightGray {
    a:Unit (string)
  }

  object data.PRE.MIN.X #LightGray {
    a:Unit (string)
  }

  object data.PRE.MAX.X #LightGray {
    a:Unit (string)
  }

  object data.PRE.AVG.X #LightGray {
    a:Unit (string)
  }

  object img.NNNNNNNNN #LightGray
  object vid.NNNNNNNNN #LightGray

  object timeindex #LightGray {
    a:BlockSize (long)
    a:Exponent (integer)
    a:Depth (integer)
  }
  
  object timestamp #LightGray
  object "timestamp" as ti #LightGray
  object duration #LightGray
  object "duration" as du #LightGray
  
  object sampleindex #LightGray {
    a:Sorted (string)
    **TBD:** Ist dieses Attribut notwendig?
  }

  object limitvalue #LightGray

  object coord.CN #LightGray {
    a:Unit (string)
  }

  session_name "1" o-- "1..n" measuringsystem_name

  measuringsystem_name "1" o-- "1..n" datasource_name
  datasource_name "1" o-- "1" ti
  datasource_name "1" o-- "0..1" du
  datasource_name "1" o-- "0..1" timeindex
  datasource_name "1" o-- "1..n" channel_name

  channel_name "1" o-- "0..1" data
  channel_name "1" o-- "0..1" sampleindex
  channel_name "1" o-- "0..n" coord.CN
  channel_name "1" o-- "0..n" data.PRE.MIN.X
  channel_name "1" o-- "0..n" data.PRE.MAX.X
  channel_name "1" o-- "0..n" data.PRE.AVG.X

  channel_name "1" o-- "0..1" VID
  channel_name "1" o-- "0..1" IMG

  channel_name "1" o-- "0..1" LIMIT

  LIMIT "1" o-- "1" limit_name

  limit_name "1" o-- "1" timestamp
  limit_name "1" o-- "1" duration
  limit_name "1" o-- "1" limitvalue

  IMG "1" o-- "1..n" img.NNNNNNNNN
  VID "1" o-- "1..n" vid.NNNNNNNNN

@enduml

' RCM-DX Topology Structure Overview
@startuml RCM_DX_Topology_overview

  object "//SESSION_NAME//" as session_name {
    a:Element (string) = "SESSION"
    a:MeasuringMode {OPERATIV | SIMULATION | TEST}
    a:StartTime (Timestamp)
    a:EndTime (Timestamp)
    a:PositionSource (string)
  }

  object TOPOLOGY {
    a:Version (string)
  }

  object TRACK {
    d:id (32 bit signed integer)
    d:direction (8 bit signed integer)
    d:gtgId (string)
    d:length (32 bit float)
    d:name (string)
    d:nrLine (string)
    d:pointFrom (32 bit signed integer)
    d:pointTo (32 bit signed integer)
    d:switchType (8 bit signed integer)
    d:trackType (8 bit signed integer)
  }

  object LINE {
    d:id (32 bit signed integer)
    d:name (string)
    d:firstStation (string)
    d:lastStation (string)
    d:fromKilometer (32 bit float)
    d:toKilometer (32 bit float)
  }

  object SWITCHTRACK {
    d:gleisstrangId (32 bit signed integer)
    d:gleisstrangBez (string)
    d:weicheId (32 bit signed integer)
    d:ablenkRichtung (string)
    d:ablenkung (string)
    d:betriebspunkt (string)
    d:herzStueck (string)
    d:minRadius  (32 bit float)
    d:nr (32 bit signed integer)
    d:zusNr (string)
    d:schienenProfil
    d:status (string)
    d:schienenProfil (string)
    d:schwellenArt (string)
    d:typenPlanNr (32 bit signed integer)
    d:typNrZusatz (string)
    d:weichenArt (string)
    d:weichenTyp (string)
    d:weichenForm (string)
    d:weichenZunge (string)
  }

  object TRACKOBJECT {
    d:trackId (32 bit signed integer)
    d:type (32 bit signed integer)
    d:positionStart (32 bit float)
    d:positionEnd (32 bit float)
    d:extraInfo (string)
  }

  object TRACKPOINT {
    d:trackId (32 bit signed integer)
    d:lineId (32 bit signed integer)
    d:x (32 bit float)
    d:y (32 bit float)
    d:z (32 bit float)
    d:radius (32 bit float)
    d:kilometer (32 bit float)
    d:position (32 bit float)
    d:cant (32 bit float)
    d:inclination (32 bit float)
  }

  object PROPERTY {
    d:propertyId (32 bit signed integer)
    d:name (string)
    d:description.ge (string)
    d:description.fr (string)
    d:description.it (string)
    d:description.en (string)
  }

  session_name "1" o-- "1" TOPOLOGY

  TOPOLOGY "1" o-- "1" TRACK
  TOPOLOGY "1" o-- "1" LINE
  TOPOLOGY "1" o-- "1" SWITCHTRACK
  TOPOLOGY "1" o-- "1" TRACKOBJECT
  TOPOLOGY "1" o-- "1" TRACKPOINT
  TOPOLOGY "1" o-- "1" PROPERTY

@enduml

' RCM-DX Platform Structure Overview
@startuml RCM_DX_Platform_overview

  object "//SESSION_NAME//" as session_name {
    a:Element (string) = "SESSION"
    a:MeasuringMode {OPERATIV | SIMULATION | TEST}
    a:StartTime (Timestamp)
    a:EndTime (Timestamp)
    a:PositionSource (string)
  }

  object PLATFORM {
    a:Name (string)
    a:VehicleNumber (string)
  }

  object CONFIGURATION
  object global #LightGray
  object network #LightGray

  session_name "1" o-- "1" PLATFORM
  PLATFORM "1" o-- "1" CONFIGURATION
  CONFIGURATION "1" o-- "1" global
  CONFIGURATION "1" o-- "1" network

@enduml

' RCM-DX Environment Structure Overview
@startuml RCM_DX_Environment_overview

  object "//SESSION_NAME//" as session_name {
    a:Element (string) = "SESSION"
    a:MeasuringMode {OPERATIV | SIMULATION | TEST}
    a:StartTime (Timestamp)
    a:EndTime (Timestamp)
    a:PositionSource (string)
  }

  object ENVIRONMENT 

  object timestamp #LightGray

  object VEHICLESPEED {
    d:data (64 bit integer)
  }

  object AMBIENTTEMPERATURE {
    d:data (64 bit integer)
  }

  object WINDSPEED {
    d:data (64 bit integer)
  }

  object WINDDIRECTION {
    d:data (64 bit integer)
  }

  object WEATHERCONDITIONS {
    d:data (64 bit integer)
  }

  session_name "1" o-- "0..1" ENVIRONMENT
  ENVIRONMENT "1" o-- "1" VEHICLESPEED
  ENVIRONMENT "1" o-- "1" AMBIENTTEMPERATURE
  ENVIRONMENT "1" o-- "1" WINDSPEED
  ENVIRONMENT "1" o-- "1" WINDDIRECTION
  ENVIRONMENT "1" o-- "1" WEATHERCONDITIONS
  ENVIRONMENT "1" o-- "1" timestamp

@enduml

' RCM-DX Section Structure Overview
@startuml RCM_DX_Section_overview

  object "//SESSION_NAME//" as session_name {
    a:Element (string) = "SESSION"
    a:MeasuringMode {OPERATIV | SIMULATION | TEST}
    a:StartTime (Timestamp)
    a:EndTime (Timestamp)
    a:PositionSource (string)
  }

  object SECTION 

  object SECTIONINFO {
    d:firstTrackOffset (64 bit float)
    d:lastTrackOffset (64 bit float)
    d:startTimestamp (Timestamp)
    d:endTimestamp (Timestamp)
    d:coachOrientation (8 bit integer)
    d:trackListOffset (64 bit float)
  }

  object TRACKLIST {
    d:id (32 bit signed integer)
    d:startTimestamp (Timestamp)
    d:endTimestamp (Timestamp)
    d:orientation (8 bit signed integer)
    d:startCoveredDistance (64 bit float)
    d:endCoveredDistance (64 bit float)

  }

  session_name "1" o-- "1" SECTION
  SECTION "1" o-- "1" SECTIONINFO
  SECTION "1" o-- "1" TRACKLIST

@enduml

' RCM-DX Logging Structure Overview
@startuml RCM_DX_Logging_overview

  object "//MEASURINGSYSTEM_NAME//" as measuringsystem_name {
    a:Element (string) = "MEASURINGSYSTEM"
    a:Family (string)
    a:Revision (string)
    a:InstanceVersion (string)
    a:MeasuringMode (string)
  }

  object LOGGING

  object MESSAGES {
    d:message (string)
    d:systemReference (string)
    d:channelReference (string)
    d:level (string)
    d:timestamp (Timestamp)
  }

  object OUTAGES {
    d:message (string)
    d:systemReference (string)
    d:channelReference (string)
    d:level (string)
    d:timestamp (Timestamp)
    d:durations (64 bit integer)
  }

  measuringsystem_name "1" o-- "0..1" LOGGING

  LOGGING "1" o-- "1" MESSAGES
  LOGGING "1" o-- "1" OUTAGES

@enduml

@startuml Limit_overview

  object LIMIT

  object "//CHANNEL_NAME//" as channel_name

  object data #LightGray
  object timestamp #LightGray
  object duration #LightGray
  object limitvalue #LightGray

  object "//LIMIT_NAME//" as limit_name {
    a:Priority (8 bit integer)
    a:LimitBound (string)
  }

  channel_name "1" o-- "1" data
  channel_name "1" o-- "0..1" LIMIT
  LIMIT "1" o-- "1..n" limit_name
  limit_name "1" o-- "1" timestamp
  limit_name "1" o-- "1" duration
  limit_name "1" o-- "1..n" limitvalue

@enduml
